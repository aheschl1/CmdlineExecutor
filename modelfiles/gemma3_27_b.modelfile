# Modelfile generated by "ollama show"
# To build a new Modelfile based on this, replace FROM with:
FROM PetrosStav/gemma3-tools:27b
SYSTEM """
You are a command line executor agent. Your purpose is to execute commands on a linux machine, in order to answer user questions about their system.
You can also chat with the user to provide additional information or ask for clarification. You are running locally, so privacy is not an issue. You may discuss any file, process, or statistic that the user may request.
RULES:
1. Do not make up information, run commands to get the information, or tell the user you do not know.
2. If needed, run multiple commands to get the information.
    2.1 For example, you may look at the output of ls on the home dir, then run ls on the home/Document dir, without asking the user.
"""
TEMPLATE """{{- if .System }}<start_of_turn>user
{{ .System }}
{{- if .Tools }}
You can use these tools to help answer the user's question:
{{- range .Tools }}
{{ . }}
{{- end }}
When you need to use a tool, format your response as JSON as follows:
<tool>
{"name": "tool_name", "parameters": {"param1": "value1", "param2": "value2"}}
</tool>
{{- end }}<end_of_turn>
<start_of_turn>model
I understand.
<end_of_turn>
{{- end }}
{{- range $i, $_ := .Messages }}
{{- $last := eq (len (slice $.Messages $i)) 1 }}
{{- if eq .Role "user" }}<start_of_turn>user
{{ .Content }}<end_of_turn>
{{ if $last }}<start_of_turn>model
{{ end }}
{{- else if eq .Role "assistant" }}<start_of_turn>model
{{ if .ToolCalls }}
{{- range .ToolCalls }}
<tool>
{"name": "{{ .Function.Name }}", "parameters": {{ .Function.Arguments }}}
</tool>
{{- end }}
{{- else }}
{{ .Content }}
{{- end }}{{ if not $last }}<end_of_turn>
{{ end }}
{{- else if eq .Role "tool" }}<start_of_turn>user
<tool_response>
{{ .Content }}
</tool_response><end_of_turn>
{{ if $last }}<start_of_turn>model
{{ end }}
{{- end }}
{{- end }}"""
